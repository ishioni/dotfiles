# OMZ Configuration
BREW_LOCATION="{{ if (eq .chezmoi.os "darwin") }}/opt/homebrew/bin/brew{{else}}/home/linuxbrew/.linuxbrew/bin/brew{{end}}"
KREW_ROOT="{{ .chezmoi.homeDir }}/.krew"
DISABLE_AUTO_UPDATE="true"
ZSH_DISABLE_COMPFIX=true
ZSH_AUTOSUGGEST_BUFFER_MAX_SIZE="20"
ZSH_AUTOSUGGEST_USE_ASYNC=1

# Environment Variables
export GOPATH="{{ .chezmoi.homeDir }}/.go"
export SOPS_AGE_KEY_FILE=~/.config/sops/age/keys.txt
export STARSHIP_CONFIG=~/.config/starship/starship.toml
export ZSH="${HOME}/.oh-my-zsh"
export XDG_CONFIG_HOME=${HOME}/.config
export XDG_DATA_HOME=${HOME}/.local/share

# Plugins
plugins=(
  brew
  direnv
  docker
  git
  kubectl
  starship
  zsh-autosuggestions
  zsh-completions
  zsh-syntax-highlighting
  )

#Run!
source $ZSH/oh-my-zsh.sh

# Initializations
path+=($KREW_ROOT/bin)
eval "$(atuin init zsh)"
eval $({{ if (eq .chezmoi.os "darwin") }}gdircolors{{else}}dircolors{{end}} ~/.config/dircolors/dir_colors)

# Cache completions aggressively
autoload -Uz compinit
if [ "$(date +'%j')" != "$(stat -f '%Sm' -t '%j' ~/.zcompdump 2>/dev/null)" ]; then
  compinit
else
  compinit -C
fi
